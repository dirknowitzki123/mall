<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kingyon.chengxin.product.mapper.PdProductInfoMapper">
  <resultMap id="BaseResultMap" type="com.kingyon.chengxin.product.modal.PdProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="product_name" jdbcType="VARCHAR" property="productName" />
    <result column="subtitle" jdbcType="VARCHAR" property="subtitle" />
    <result column="price" jdbcType="DECIMAL" property="price" />
    <result column="putaway" jdbcType="TINYINT" property="putaway" />
    <result column="on_off" jdbcType="TINYINT" property="onOff" />
    <result column="pro_type" jdbcType="INTEGER" property="proType" />
    <result column="detail_id" jdbcType="BIGINT" property="detailId" />
    <result column="supplier_id" jdbcType="BIGINT" property="supplierId" />
    <result column="sales_amount" jdbcType="BIGINT" property="salesAmount" />
    <result column="visit_url" jdbcType="VARCHAR" property="visitUrl" />
    <result column="remarks" jdbcType="VARCHAR" property="remarks" />
    <result column="channel_id" jdbcType="BIGINT" property="channelId" />
    <result column="main_image" jdbcType="VARCHAR" property="mainImage" />
    <result column="tag" jdbcType="VARCHAR" property="tag" />
    <result column="product_code" jdbcType="VARCHAR" property="productCode" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="deleted" jdbcType="TINYINT" property="deleted" />
    <result column="brand_id" jdbcType="BIGINT" property="brandId" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.kingyon.chengxin.product.modal.PdProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    <result column="product_detail" jdbcType="LONGVARCHAR" property="productDetail" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    id, product_name, subtitle, price, putaway, on_off, pro_type, detail_id, supplier_id, 
    sales_amount, visit_url, remarks, channel_id, main_image, tag, product_code, create_time, 
    modify_time, deleted, brand_id
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    product_detail
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from pd_product_info
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    delete from pd_product_info
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.kingyon.chengxin.product.modal.PdProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into pd_product_info (product_name, subtitle, price, 
      putaway, on_off, pro_type, 
      detail_id, supplier_id, sales_amount, 
      visit_url, remarks, channel_id, 
      main_image, tag, product_code, 
      create_time, modify_time, deleted, 
      brand_id, product_detail)
    values (#{productName,jdbcType=VARCHAR}, #{subtitle,jdbcType=VARCHAR}, #{price,jdbcType=DECIMAL}, 
      #{putaway,jdbcType=TINYINT}, #{onOff,jdbcType=TINYINT}, #{proType,jdbcType=INTEGER}, 
      #{detailId,jdbcType=BIGINT}, #{supplierId,jdbcType=BIGINT}, #{salesAmount,jdbcType=BIGINT}, 
      #{visitUrl,jdbcType=VARCHAR}, #{remarks,jdbcType=VARCHAR}, #{channelId,jdbcType=BIGINT}, 
      #{mainImage,jdbcType=VARCHAR}, #{tag,jdbcType=VARCHAR}, #{productCode,jdbcType=VARCHAR}, 
      #{createTime,jdbcType=TIMESTAMP}, #{modifyTime,jdbcType=TIMESTAMP}, #{deleted,jdbcType=TINYINT}, 
      #{brandId,jdbcType=BIGINT}, #{productDetail,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.kingyon.chengxin.product.modal.PdProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into pd_product_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="productName != null">
        product_name,
      </if>
      <if test="subtitle != null">
        subtitle,
      </if>
      <if test="price != null">
        price,
      </if>
      <if test="putaway != null">
        putaway,
      </if>
      <if test="onOff != null">
        on_off,
      </if>
      <if test="proType != null">
        pro_type,
      </if>
      <if test="detailId != null">
        detail_id,
      </if>
      <if test="supplierId != null">
        supplier_id,
      </if>
      <if test="salesAmount != null">
        sales_amount,
      </if>
      <if test="visitUrl != null">
        visit_url,
      </if>
      <if test="remarks != null">
        remarks,
      </if>
      <if test="channelId != null">
        channel_id,
      </if>
      <if test="mainImage != null">
        main_image,
      </if>
      <if test="tag != null">
        tag,
      </if>
      <if test="productCode != null">
        product_code,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="modifyTime != null">
        modify_time,
      </if>
      <if test="deleted != null">
        deleted,
      </if>
      <if test="brandId != null">
        brand_id,
      </if>
      <if test="productDetail != null">
        product_detail,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="productName != null">
        #{productName,jdbcType=VARCHAR},
      </if>
      <if test="subtitle != null">
        #{subtitle,jdbcType=VARCHAR},
      </if>
      <if test="price != null">
        #{price,jdbcType=DECIMAL},
      </if>
      <if test="putaway != null">
        #{putaway,jdbcType=TINYINT},
      </if>
      <if test="onOff != null">
        #{onOff,jdbcType=TINYINT},
      </if>
      <if test="proType != null">
        #{proType,jdbcType=INTEGER},
      </if>
      <if test="detailId != null">
        #{detailId,jdbcType=BIGINT},
      </if>
      <if test="supplierId != null">
        #{supplierId,jdbcType=BIGINT},
      </if>
      <if test="salesAmount != null">
        #{salesAmount,jdbcType=BIGINT},
      </if>
      <if test="visitUrl != null">
        #{visitUrl,jdbcType=VARCHAR},
      </if>
      <if test="remarks != null">
        #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="channelId != null">
        #{channelId,jdbcType=BIGINT},
      </if>
      <if test="mainImage != null">
        #{mainImage,jdbcType=VARCHAR},
      </if>
      <if test="tag != null">
        #{tag,jdbcType=VARCHAR},
      </if>
      <if test="productCode != null">
        #{productCode,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="deleted != null">
        #{deleted,jdbcType=TINYINT},
      </if>
      <if test="brandId != null">
        #{brandId,jdbcType=BIGINT},
      </if>
      <if test="productDetail != null">
        #{productDetail,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.kingyon.chengxin.product.modal.PdProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    update pd_product_info
    <set>
      <if test="productName != null">
        product_name = #{productName,jdbcType=VARCHAR},
      </if>
      <if test="subtitle != null">
        subtitle = #{subtitle,jdbcType=VARCHAR},
      </if>
      <if test="price != null">
        price = #{price,jdbcType=DECIMAL},
      </if>
      <if test="putaway != null">
        putaway = #{putaway,jdbcType=TINYINT},
      </if>
      <if test="onOff != null">
        on_off = #{onOff,jdbcType=TINYINT},
      </if>
      <if test="proType != null">
        pro_type = #{proType,jdbcType=INTEGER},
      </if>
      <if test="detailId != null">
        detail_id = #{detailId,jdbcType=BIGINT},
      </if>
      <if test="supplierId != null">
        supplier_id = #{supplierId,jdbcType=BIGINT},
      </if>
      <if test="salesAmount != null">
        sales_amount = #{salesAmount,jdbcType=BIGINT},
      </if>
      <if test="visitUrl != null">
        visit_url = #{visitUrl,jdbcType=VARCHAR},
      </if>
      <if test="remarks != null">
        remarks = #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="channelId != null">
        channel_id = #{channelId,jdbcType=BIGINT},
      </if>
      <if test="mainImage != null">
        main_image = #{mainImage,jdbcType=VARCHAR},
      </if>
      <if test="tag != null">
        tag = #{tag,jdbcType=VARCHAR},
      </if>
      <if test="productCode != null">
        product_code = #{productCode,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="deleted != null">
        deleted = #{deleted,jdbcType=TINYINT},
      </if>
      <if test="brandId != null">
        brand_id = #{brandId,jdbcType=BIGINT},
      </if>
      <if test="productDetail != null">
        product_detail = #{productDetail,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.kingyon.chengxin.product.modal.PdProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    update pd_product_info
    set product_name = #{productName,jdbcType=VARCHAR},
      subtitle = #{subtitle,jdbcType=VARCHAR},
      price = #{price,jdbcType=DECIMAL},
      putaway = #{putaway,jdbcType=TINYINT},
      on_off = #{onOff,jdbcType=TINYINT},
      pro_type = #{proType,jdbcType=INTEGER},
      detail_id = #{detailId,jdbcType=BIGINT},
      supplier_id = #{supplierId,jdbcType=BIGINT},
      sales_amount = #{salesAmount,jdbcType=BIGINT},
      visit_url = #{visitUrl,jdbcType=VARCHAR},
      remarks = #{remarks,jdbcType=VARCHAR},
      channel_id = #{channelId,jdbcType=BIGINT},
      main_image = #{mainImage,jdbcType=VARCHAR},
      tag = #{tag,jdbcType=VARCHAR},
      product_code = #{productCode,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      deleted = #{deleted,jdbcType=TINYINT},
      brand_id = #{brandId,jdbcType=BIGINT},
      product_detail = #{productDetail,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.kingyon.chengxin.product.modal.PdProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-01-04 14:19:31.
    -->
    update pd_product_info
    set product_name = #{productName,jdbcType=VARCHAR},
      subtitle = #{subtitle,jdbcType=VARCHAR},
      price = #{price,jdbcType=DECIMAL},
      putaway = #{putaway,jdbcType=TINYINT},
      on_off = #{onOff,jdbcType=TINYINT},
      pro_type = #{proType,jdbcType=INTEGER},
      detail_id = #{detailId,jdbcType=BIGINT},
      supplier_id = #{supplierId,jdbcType=BIGINT},
      sales_amount = #{salesAmount,jdbcType=BIGINT},
      visit_url = #{visitUrl,jdbcType=VARCHAR},
      remarks = #{remarks,jdbcType=VARCHAR},
      channel_id = #{channelId,jdbcType=BIGINT},
      main_image = #{mainImage,jdbcType=VARCHAR},
      tag = #{tag,jdbcType=VARCHAR},
      product_code = #{productCode,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      deleted = #{deleted,jdbcType=TINYINT},
      brand_id = #{brandId,jdbcType=BIGINT}
    where id = #{id,jdbcType=BIGINT}
  </update>



  <!--boss查询所有商品-->
  <select id="selectProductListBoss" parameterType="com.kingyon.chengxin.product.dto.query.ProductInfoQuery"
          resultType="com.kingyon.chengxin.product.dto.response.ProductListDto">
    SELECT
    p.id as id,
    p.product_name AS productName ,
    p.price as price,
    p.putaway as putaway ,
    p.pro_type as proType,
    p.create_time as createTime,
    CASE p.channel_id
    WHEN 3340001  THEN '齐欣慧择'
    WHEN 3340002  THEN '泰康'
    END as channelName,
    s.supplier_name as supplierName
    FROM pd_product_info p
    LEFT JOIN cm_supplier_dictionaries s ON s.id = p.supplier_id
    <trim prefix="WHERE" prefixOverrides="AND |OR ">
      AND  p.deleted = 0
      <if test="productName != null and productName != '' ">
        AND p.product_name like concat('%',#{productName,jdbcType=VARCHAR},'%')
      </if>
      <if test="putaway != null ">
        AND p.putaway = #{putaway}
      </if>
      <if test="proType != null and proType != '' ">
        AND p.pro_type = #{proType}
      </if>
    </trim>
  </select>


  <!--boss查询所有商品-->
  <select id="selectProductList" parameterType="com.kingyon.chengxin.product.dto.query.ProductInfoQuery"
          resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    FROM pd_product_info
    <trim prefix="WHERE" prefixOverrides="AND |OR ">
      AND  deleted = 0
      <if test="productName != null and productName != '' ">
        AND product_name like concat('%',#{productName,jdbcType=VARCHAR},'%')
      </if>
      <if test="putaway != null and putaway != '' ">
        AND putaway = #{putaway}
      </if>
      <if test="proType != null and proType != '' ">
        AND pro_type = #{proType}
      </if>
    </trim>
  </select>


</mapper>